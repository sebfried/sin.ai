<!DOCTYPE html>
<html>

<head>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100vh;
            /* scroll-snap-type: y mandatory; */
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        .item-container {
            display: flex;
            flex-direction: column;
        }

        .item {
            flex-shrink: 0;
            width: 100%;
            height: 70svh;
            scroll-snap-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: white;
        }

        .item img {
            max-width: 90%;
            max-height: 90%;
            filter: grayscale(0);
        }

        .last.item {
            height: 500px;
        }

        #_1 {
            background-color: red;
        }

        #_2 {
            background-color: blue;
        }

        #_3 {
            background-color: green;
        }
    </style>
</head>

<body>
    <div class="item-container">
        <div class="item" id="_3">
            <img src="img/3.png" alt="">
        </div>
        <div class="item" id="_2">
            <img src="img/2.png" alt="">
        </div>
        <div class="item" id="_1">
            <img src="img/1.png" alt="">
        </div>
    </div>
    <div class="last item"></div>

    <script>
        var images = document.getElementsByTagName('img');
        var lastScrollY = window.scrollY;
        var ticking = false;
    
        function update() {
            var currentScrollY = window.scrollY;
            var viewportMiddle = window.innerHeight / 2;
    
            for (var i = 0; i < images.length; i++) {
                var image = images[i];
                var position = image.getBoundingClientRect();
    
                // Calculate the center of the image
                var imageCenter = position.top + position.height / 2;
    
                // Calculate the distance from the image center to the center of the viewport
                var distanceToMiddle = Math.abs(imageCenter - viewportMiddle);
    
                if (position.top < window.innerHeight && position.bottom >= 0) {
                    var percentFromMiddle = distanceToMiddle / viewportMiddle;
                    var invertedPercent = 1 - percentFromMiddle; // Invert the percentage from the middle
    
                    // Calculate the new width and grayscale value based on the inverted percentage from the middle
                    const newWidth = 200 + invertedPercent * 200;
                    const grayscaleValue = 100 - invertedPercent * 100;
    
                    // Set the new styles for the image
                    image.style.width = newWidth + 'px';
                    image.style.filter = 'grayscale(' + grayscaleValue + '%)';
                }
            }
    
            lastScrollY = currentScrollY;
            ticking = false;
        }
    
        function requestTick() {
            if (!ticking) {
                requestAnimationFrame(update);
                ticking = true;
            }
        }
    
        update();
    
        window.addEventListener('scroll', requestTick);
    </script>
    
    
    
</body>

</html>